\begin{figure*}
\begin{center}
  \begin{tikzpicture}[framed]
  \node[draw=none] (1) {If};
  \node[draw, right=0.1cm of 1] (2) {10};
  \node[draw=none, right=0.1cm of 2] (3) {is added to two numbers,};
  \node[draw, right=0.1cm of 3] (4) {the first one};
  \node[draw=none, right=0.1cm of 4] (5) {will be};
  \node[draw, right=0.1cm of 5] (6) {5};
  \node[draw=none, right=0.1cm of 6] (7) {more than};
  \node[draw, right=0.1cm of 7] (8) {thrice};
  \node[draw, right=0.1cm of 8] (9) {the second};
  \node[circle,draw,fill=white,text=black] (14) at (7, 1) {$V_1$};
  \node[circle,draw,fill=white,text=black] (13) at (13, 1) {$V_2$};
  \node[circle,draw,fill=white,text=black] (10) at (11, 2) {*};
  \node[circle,draw,fill=white,text=black] (11) at (9,2.5){+};
  \node[circle,draw,fill=white,text=black] (12) at (7.5,3){=};
  \draw[->,solid,-triangle 90,fill=black] (10) to (8);
  \draw[->,solid,-triangle 90,fill=black] (11) to (6);
  \draw[->,solid,-triangle 90,fill=black] (11) to (10);
  \draw[->,solid,-triangle 90,fill=black] (12) to (11);
  \draw[->,solid,-triangle 90,fill=black] (12) to (14);
  \draw[->,solid,-triangle 90,fill=black] (14) to (4);
  \draw[->,solid,-triangle 90,fill=black] (13) to (9);
  \draw[->,solid,-triangle 90,fill=black] (10) to (13);
  \draw[bend right,->]  (2) to node [auto] {Modifier} (4);
  \draw[bend right,->]  (2) to node [auto] {Modifier} (9);
  \end{tikzpicture}
\end{center}
\caption{Example of an Equation parse}
\label{fig:eqparse}
\end{figure*}

  In this section, we introduce an equation parse for a sentence. An
  equation parse of a sentence $S$ is a 3-tuple $(T, E, M)$, where $T$
  represents a set of {\em triggers} extracted from $S$, $E$
  represents an {\em equation tree} formed with the set $T$ as leaves,
  and $M$ represents the {\em modifiers} along with the manner in
  which they modify a variable. We now describe these terms in detail.

  \noindent \textbf{Trigger} Given a sentence $S$ mentioning a
  mathematical relation, a trigger can either be a {\em quantity
    trigger} expressed in $S$, or {\em variable trigger} which is a
  span of text in $S$ corresponding to a variable. A {\em quantity
    trigger} is a tuple $(q, s)$, where $q$ is the numeric value of
  the quantity mentioned in text, and $s$ is the span of text from the
  sentence $S$ which includes the quantity. A {\em variable trigger}
  is a tuple $(l, s)$, where $l$ represents the name of the variable,
  and $s$, as before, represents the span of text representing the
  variable. For example, for the sentence in Fig \ref{fig:eqparse},
  the spans ``10'', ``5'', and ``thrice'' generate quantity triggers,
  whereas ``the first one'' and ``the second'' generate variable
  triggers, with labels $V_1$ and $V_2$ respectively. The same span of
  text can generate multiple triggers.  For example, the span ``two
  numbers'' represent a quantity, but can be a valid grounding for
  both the variables in text. Therefore, it generates $3$ triggers -
  ($2.0$, ``two numbers''), ($V_1$, ``two numbers''), and ($V_2$,
  ``two numbers'').

  \noindent \textbf{Equation Tree} An equation tree is a binary tree
  whose leaves represent triggers, and internal nodes (except the
  root) are labeled with one of the following operations -- {\em addition,
  subtraction, multiplication, division}. In addition, for nodes which
  are labeled with subtraction or division, we maintain a separate
  variable to determine order of its children. The root of the tree is
  always labeled with the operation {\em equal}. In Fig \ref{fig:eqparse},
  the equation tree is constructed on the triggers generated by ``the
  first one'', ``5'', ``thrice'', and ``the second''. 

  An equation tree also gives a natural representation for an
  equation. Each node $n$ in an equation tree represents an expression
  $\Expr(n)$, and the label of the parent node determines how the
  expressions of its children are to be composed to construct its own
  expression. Let us denote the operation label for a non-leaf node
  $n$ to be $\Op(n)$, where $\Op(n) \in \{+, -, *, /, =\}$ and the
  order of a node $n$'s children by $\Order(n)$, which takes values
  ${lr, rl}$. For trigger node $n$, the expression $\Expr(n)$
  represents the variable label, if $n$ is a variable trigger, and the
  numeric value of the quantity, if it is a quantity trigger. Finally,
  we use $lc(n)$ and $rc(n)$ to represent the left and right child of
  node $n$, respectively. The generation of the mathematical
  expression that corresponds to the parse tree can be done
  recursively as follows:
  
  For all non-leaf node $n$ of an equation tree, we have
  \begin{multline}\label{eq:parse}
    \Expr(n) = \\
    \begin{cases}
    \Expr(lc(n)) \Op(n) \Expr(rc(n)) & \mbox{if } \Op(n) \in \{+,*, =\} \\
    \Expr(lc(n)) \Op(n) \Expr(rc(n)) &  \mbox{if } \Op(n) \in \{-,/\} \wedge\\
    & \Order(n)=lr \\
    \Expr(rc(n)) \Op(n) \Expr(lc(n)) &  \mbox{if } \Op(n) \in \{-,/\} \wedge\\
    & \Order(n)=rl \\
    \end{cases}
  \end{multline}

  Referring to the equation tree in \ref{fig:eqparse}, the node marked
  ``*'' represents $3*V_2$, the node marked ``+'' represents
  $5+3*V_2$ and, finally the root represents $V_1=5+3*V_2$.
  
  The leaves in an equation tree form an ordered list of triggers,
  that is, the order of the leaves used in an equation tree is the
  same as the order of the corresponding triggers in the text. Hence
  equation trees implicitly provide a constituent-parse-like structure
  for the sentence. The underlying assumption we make when
  constructing equation trees is that if there is a need to perform an
  operation between two expressions, then those expressions are
  mentioned consecutively in the text; that is, no other expression
  from the equation is mentioned between them. For example, in Fig
  \ref{fig:eqparse}, ``thrice'' and ``the second'' are found next to
  each other, ``5'' and ``thrice the second'' do not have any
  trigger mentioned in the span between them.

  Although we found that the ``consecutive triggers'' assumption
  described above holds in a large fraction of the texts we studied,
  there are cases when it is not supported. Certain numbers in the
  text modify both variables in the same manner, and they might not be
  mentioned in the vicinity of grounded variable spans. In our running
  example, the number ``10'' needs to be added to both variables, but
  $10$ and $V_2$ clearly do not satisfy the consecutive trigger
  assumption. In order to support such variable modification, we
  introduce the concept of modifiers, which we define next.

  \noindent \textbf{Modifiers} Modifiers are quantities or expressions
  mentioned in text, which modify both variables of an equation in a
  similar way. For example, in ``When you double two numbers, their
  sum is 30'', the term ``double'' determines that both variables
  needs to be multiplied by $2$. Similarly, in ``In 5 years, John will
  be twice as old as his brother.'', ``10'' needs to be added to the
  ages of both John and his brother, before we can use the relation
  expressed in the later part of the text. We also associate a label
  with each modifier to know how it is changing the variables in the
  sentence. For example, ``double'' in the first example was a
  multiplicative modifier, whereas ``10'' in the second example is an
  additive modifier. In our problem, we restrict modifiers to comprise
  only single quantity triggers and assume that a modifier modifies
  all its relevant variables in the same way. We believe that these
  assumptions do not restrict our coverage. There are six possible ways
  it can modify the variables in the problem: addition, subtraction
  (both orders), multiplication and division (both orders).

  Given an equation parse of a sentence, the equation represented by
  it is the expression generated by the root of $T$ (following
  Equation \ref{eq:parse}), followed by a modification of the
  variables by the modifier $M$.



